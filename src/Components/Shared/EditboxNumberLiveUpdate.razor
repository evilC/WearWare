@* Handles validation as you type in an InputNumber*@
@typeparam TValue
@inherits InputNumber<TValue>

<input @attributes="AdditionalAttributes"
       class="@CssClass"
       value="@(CurrentValueAsString ?? string.Empty)"
       @oninput="HandleInput" />
       @if (AddFocusGrabber){
              @* Hides keyboard on mobile devices when you click Next on the virtual keyboard *@
              <select style="width: 0px; height: 0px;"/>
       }


@code {
       [Parameter]
       public EventCallback<ChangeEventArgs> OnInput { get; set; }
       [Parameter]
       public bool AddFocusGrabber { get; set; } = false;

       private async Task HandleInput(ChangeEventArgs e)
       {
              CurrentValueAsString = e?.Value?.ToString() ?? string.Empty;
              // Forward the event to parent component, so that if, in the form, we specify @oninput, it gets called.
              if (OnInput.HasDelegate)
              {
                     await OnInput.InvokeAsync(e);
              }
       }
}
