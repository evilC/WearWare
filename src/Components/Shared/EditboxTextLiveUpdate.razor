@* Handles validation as you type in an InputText*@
@inherits InputText

<input @attributes="AdditionalAttributes"
       class="@CssClass"
       value="@(CurrentValueAsString ?? string.Empty)"
       @oninput="HandleInput" />
       @if (AddFocusGrabber){
              @* Hides keyboard on mobile devices when you click Next on the virtual keyboard *@
              <select style="width: 0px; height: 0px;"/>
       }

@code {
       [Parameter]
       public EventCallback<string> OnInput { get; set; }
       [Parameter]
       public bool AddFocusGrabber { get; set; } = false;

       private async Task HandleInput(ChangeEventArgs e)
       {
              CurrentValueAsString = e?.Value?.ToString() ?? string.Empty;
              // Forward the current string value to the parent so @oninput handlers receive the bound value type expected by Razor.
              if (OnInput.HasDelegate)
              {
                     await OnInput.InvokeAsync(CurrentValueAsString);
              }
       }
}