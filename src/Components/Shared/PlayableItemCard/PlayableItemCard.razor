@using WearWare.Common.Media
@using WearWare.Components.Forms.EditPlayableItemForm

<div class="playlist-item-card playable-item-card-height gap-2">
    @if (!string.IsNullOrEmpty(ImageSrc))
    {
        <div>
            @* Image *@
            <img class="rounded playable-item-image-height playable-item-image-width" src="@ImageSrc" alt="@Item?.Name" @onclick="HandleImageClick" style="cursor:@(ImageClicked.HasDelegate ? "pointer" : "default")" />
        </div>
    }
    <div class="playlist-item-info flex flex-column">
        @* Name / Filename *@
        <strong class="fs-6 fw-bold">@(FormPage == EditPlayableItemFormPage.Import ? Item?.SourceFileName : Item?.Name)</strong>
        @if (Item is not null)
        {
            @* PlayMode *@
            @if (FormPage != EditPlayableItemFormPage.Library && FormPage != EditPlayableItemFormPage.Import){
                <div class="fs-6">
                    @(
                        @* PlayMode *@
                        $"{Item.PlayMode.ToString()}: " +
                        @* PlayModeValue *@
                        $"{(Item.PlayMode == PlayMode.Loop ? $" {Item.PlayModeValue}x" : (Item.PlayMode == PlayMode.Duration ? $" {Item.PlayModeValue}s" : ""))}"
                    )
                </div>
            }
            @if (FormPage == EditPlayableItemFormPage.Import){
                @* Type (Animation / Image) *@
                <div class = "text-muted fs-6">@(MediaTypeMappings.GetMediaType(Path.GetExtension(Item.SourceFileName)) ?? MediaType.IMAGE)</div>
            }
            else
            {
                @* Brightness *@
                <div class = "fs-6">Brightness: @Item.CurrentBrightness%</div>
            }
        }
    </div>
</div>
