@using WearWare.Components.Forms.EditPlayableItemForm
@using WearWare.Components.Shared.PlayableItemCard
@rendermode InteractiveServer

<div class="ww-modal">
    <div class ="ww-modal-header text-center">
        <h2>Choose an item</h2>
    </div>
    <div class="ww-modal-body">
        @if (LibraryItems is null || !LibraryItems.Any())
        {
            <div>No items found.</div>
        }
        else
        {
            @foreach (var libItem in LibraryItems)
            {
                <div class="mb-3">
                    <div class="card h-100 shadow-sm bg-light">
                        <div class="card-body p-0">
                            <div class="d-flex align-items-center gap-3 p-2" style="cursor:pointer;" @onclick="() => ItemSelected(libItem)">
                                <div class="flex-grow-1">
                                    <PlayableItemCard
                                        ImageSrc="@($"/library-image/{@libItem.SourceFileName}")"
                                        Item="libItem"
                                        ImageClicked="@(() =>ItemSelected(libItem))"
                                        FormPage="EditPlayableItemFormPage.Library"
                                    />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }
        }
    </div>
    <div class="ww-modal-footer row justify-content-center">
        <button class="btn btn-secondary btn-lg col-12" @onclick="() => OnCancel.InvokeAsync(null)">Cancel</button>
    </div>
</div>
